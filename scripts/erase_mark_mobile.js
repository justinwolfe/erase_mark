function fullFunc(e){function t(n){if(n.length===0){e.ready();return false}$.getScript(n[0],function(){t(n.slice(1))})}function n(e){$.each(e,function(e,t){$("<link>").attr({href:t,rel:"stylesheet"}).appendTo("head")})}function r(r){var i=document.createElement("script");i.type="text/javascript";i.src=r;i.onload=function(){n(e.css);t(e.js)};document.body.appendChild(i)}e.jqpath=e.jqpath||"http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js";r(e.jqpath)}window.bookmarklet=function(e){fullFunc(e)};window.bookmarklet({css:["http://somedrafts.com/erase_mark/scripts/erase_mark.css"],js:["http://somedrafts.com/erase_mark/scripts/jquery.ba-replacetext.js","http://somedrafts.com/erase_mark/scripts/jgestures.min.js","http://somedrafts.com/erase_mark/scripts/jquery.hammer.js","http://somedrafts.com/erase_mark/scripts/hammer.js"],ready:function(){function S(){$("body").append("				<div id='loadingVeil'></div>");$("#loadingVeil").fadeIn(750,function(){x()})}function x(){var e=new RegExp("\\S+\\s*","g");$("body *").replaceText(e,C);$("#loadingVeil").remove();T()}function T(){$("a").click(function(e){e.preventDefault()});$("img").click(function(e){e.preventDefault();$(this).toggleClass("eraser")});$("span").hammer({prevent_default:false,drag_vertical:false}).bind("tap hold",function(e){if(e.type=="tap"){if(w==false){if(b=="eraser"){if($(this).hasClass("eraser")==true){$(this).removeClass("eraser");$(this).css("opacity",1)}else{$(this).addClass("eraser");$(this).css("opacity",d)}}else if(b=="redactor"){$(this).toggleClass("redactor")}}else if(w==true){if(g=="no"&&y=="no"){$(this).addClass("burnMarker");$(this).removeClass("eraser");$(this).removeClass("redactor");$(this).css("opacity",1);var r=$(this).attr("id");var i=r.substring(4);g=parseInt(i)}else if(g!="no"&&y=="no"){$(this).addClass("burnMarker");$(this).removeClass("eraser");$(this).removeClass("redactor");$(this).css("opacity",1);var s=$(this).attr("id");var o=s.substring(4);y=parseInt(o)}else if(g!="no"&&y!="no"){$("#word"+g).removeClass("burnMarker");$("#word"+y).removeClass("burnMarker");g="no";y="no"}}}else if(e.type=="hold"){n=$(this).attr("id");var u=n.substring(4);t=parseInt(u);D()}else if(e.type=="doubletap"){}});$(window).bind("swipeleft swipeleftup swipeleftdown",function(e){if(w==true){if(g!="no"&&y!="no"){p=true;_()}else{}}else if(w==false){if(h==false&&p==false){l=setTimeout(function(){h=false},600);w=true;h=true;$("body").append("								<div id='burnTopFrame'></div>								<div id='burnBottomFrame'></div>");$("#burnTopFrame").hammer({prevent_default:false,drag_vertical:false}).bind("tap",function(e){$("#burnTopFrame").remove();$("#burnBottomFrame").remove();w=false});$("#burnBottomFrame").hammer({prevent_default:false,drag_vertical:false}).bind("tap",function(e){$("#burnTopFrame").remove();$("#burnBottomFrame").remove();w=false})}else{}}});$(window).bind("swiperight swiperightup swiperightdown",function(e){if(w==true){if(g!="no"&&y!="no"){p=true;M()}else{}}else if(w==false&&E==false){if(h==false&&p==false){h=true;E=true;l=setTimeout(function(){h=false},600);N()}else{}}})}function N(){$("body").append("					<div id='mobileSlateMenu'>						<div id='closeMenu'>close this menu</div>						<div class='mobileMenuHeading' id='mobileMenuSettings'>settings</div>						<div id='modeHolder'><div class='mobileMenuButton' id='modeLabel'>mode: </div><div class='mobileMenuOption' id='modeSwitch'>butt</div></div>						<div id='opacityHolder'><div class='mobileMenuButton' id='opacityLabel'>opacity: </div><div class='mobileMenuOption' id='opacitySwitch'>.05</div></div>						<div id='bombSizeHolder'><div class='mobileMenuButton' id='bombSizeLabel'>radius: </div><div class='mobileMenuOption' id='bombSizeSwitch'>20</div></div>						<div class='mobileMenuHeading' id='mobileMenuActions'>actions</div>						<div class='mobileMenuButton2' id='clearSlate'>clear</div>						<div class='mobileMenuButton2' id='randomSlate'>random</div>						<div class='mobileMenuButton2' id='resetSlate'>reset</div>					</div>");$("#modeSwitch").text(b);$("#opacitySwitch").text(d);$("#bombSizeSwitch").text(r);$("#closeMenu").hammer({prevent_default:false,drag_vertical:false}).bind("tap",function(e){$("#mobileSlateMenu").remove();E=false});$("#modeLabel").hammer({prevent_default:false,drag_vertical:false}).bind("tap",function(e){k();$("#modeSwitch").text(b)});$("#opacityLabel").hammer({prevent_default:false,drag_vertical:false}).bind("tap",function(e){if(u<=9){u=u+1;d=o[u];$(".eraser").css("opacity",d);$("span").each(function(e,t){if($(this).hasClass("eraser")==true){$(this).removeClass("eraser");$(this).addClass("eraser")}});$("#opacitySwitch").text(d)}else if(u>=10){u=0;d=o[u];$(".eraser").css("opacity",d);$("span").each(function(e,t){if($(this).hasClass("eraser")==true){$(this).removeClass("eraser");$(this).addClass("eraser")}});$("#opacitySwitch").text(d)}});$("#bombSizeLabel").hammer({prevent_default:false,drag_vertical:false}).bind("tap",function(e){if(s<=3){s=s+1;r=i[s];$("#bombSizeSwitch").text(r)}else if(s>=4){s=0;r=i[s];$("#bombSizeSwitch").text(r)}});$("#clearSlate").hammer({prevent_default:false,drag_vertical:false}).bind("tap",function(e){L()});$("#randomSlate").hammer({prevent_default:false,drag_vertical:false}).bind("tap",function(e){A()});$("#resetSlate").hammer({prevent_default:false,drag_vertical:false}).bind("tap",function(e){O()})}function C(t){e=e+1;return"<span id='word"+e+"'>"+t+"</span>";alert(e)}function k(){var e=b;if(e=="eraser"){$("span").each(function(e,t){if($(this).hasClass("eraser")==true){$(this).css("opacity",1);$(this).addClass("redactor");$(this).removeClass("eraser")}});b="redactor"}else if(e=="redactor"){$("span").each(function(e,t){if($(this).hasClass("redactor")==true){$(this).css("opacity",d);$(this).removeClass("redactor");$(this).addClass("eraser")}});b="eraser"}}function L(){$("span").each(function(e,t){if(b=="eraser"){$(this).addClass("eraser");$(this).css("opacity",d)}else if(b=="redactor"){$(this).addClass("redactor");$(this).css("opacity",1)}});$("img").each(function(e,t){$(this).addClass("eraser")})}function A(){$("span").each(function(e,t){var n=Math.random();if(n>.5){if(b=="eraser"){$(this).addClass("eraser");$(this).css("opacity",d)}else if(b=="redactor"){$(this).addClass("redactor");$(this).css("opacity",1)}}else{}})}function O(){$("span").each(function(e,t){$(this).removeClass("eraser");$(this).removeClass("redactor");$(this).css("opacity",1)});$("img").each(function(e,t){$(this).removeClass("eraser")})}function M(){if(g<y){var e=g;var t=y}else if(g>y){e=y;t=g}for(var n=e;n<=t;n++){if(b=="eraser"){$('span[id="word'+n+'"]').addClass("eraser");$('span[id="word'+n+'"]').css("opacity",d)}else if(b=="redactor"){$('span[id="word'+n+'"]').addClass("redactor");$('span[id="word'+n+'"]').css("opacity",1)}}$("span").each(function(e,t){$(this).removeClass("burnMarker")});g="no";y="no";c=setTimeout(function(){p=false},300)}function _(){if(g<y){var e=g;var t=y}else if(g>y){e=y;t=g}for(var n=e;n<=t;n++){if(b=="eraser"){var r=Math.random();if(r>.7){$('span[id="word'+n+'"]').addClass("eraser");$('span[id="word'+n+'"]').css("opacity",d)}else{}}else if(b=="redactor"){var i=Math.random();if(i>.7){$('span[id="word'+n+'"]').addClass("redactor");$('span[id="word'+n+'"]').css("opacity",1)}else{}}}$("span").each(function(e,t){$(this).removeClass("burnMarker")});g="no";y="no";c=setTimeout(function(){p=false},300)}function D(){var e=t*1-r*1;var n=t*1+r*1;for(var i=e;i<n;i++){if(b=="eraser"){if(i==t){}else{$('span[id="word'+i+'"]').addClass("eraser");$('span[id="word'+i+'"]').css("opacity",d)}}else if(b=="redactor"){if(i==t){}else{$('span[id="word'+i+'"]').addClass("redactor");$('span[id="word'+i+'"]').css("opacity",1)}}}}var e=0;var t;var n;var r=20;var i=[20,30,40,50,10];var s=0;var o=[.05,.1,.15,.25,.35,.45,.55,.65,.75,0];var u=0;var a=false;var f;var l;var c;var h=false;var p=false;var d=.05;var v=false;var m=false;var g="no";var y="no";var b="eraser";var w=false;var E=false;S();}});