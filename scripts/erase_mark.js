function fullFunc(e){function t(n){if(n.length===0){e.ready();return false}$.getScript(n[0],function(){t(n.slice(1))})}function n(e){$.each(e,function(e,t){$("<link>").attr({href:t,rel:"stylesheet"}).appendTo("head")})}function r(r){var i=document.createElement("script");i.type="text/javascript";i.src=r;i.onload=function(){n(e.css);t(e.js)};document.body.appendChild(i)}e.jqpath=e.jqpath||"http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js";r(e.jqpath)}window.bookmarklet=function(e){fullFunc(e)};window.bookmarklet({css:["http://somedrafts.com/erase_mark/scripts/erase_mark.css"],js:["http://somedrafts.com/erase_mark/scripts/jquery.ba-replacetext.js"],ready:function(){function l(){$("body").append("				<div id='loadingVeil'></div>");$("#loadingVeil").fadeIn(750,function(){c()})}function c(){var e=new RegExp("\\S+\\s*","g");$("body *").replaceText(e,p);$("#loadingVeil").remove();h()}function h(){$("span").click(function(){if(s==false&&o==false){if(f=="eraser"){if($(this).hasClass("eraser")==true){$(this).removeClass("eraser");$(this).css("opacity",1)}else{$(this).addClass("eraser");$(this).css("opacity",i)}}else if(f=="redactor"){$(this).toggleClass("redactor")}}else if(s==true&&o==false){if(u=="no"&&a=="no"){$(this).addClass("burnMarker");var e=$(this).attr("id");var t=e.substring(4);u=parseInt(t)}else if(u!="no"&&a=="no"){$(this).addClass("burnMarker");var r=$(this).attr("id");var l=r.substring(4);a=parseInt(l)}else if(u!="no"&&a!="no"){$("#word"+u).removeClass("burnMarker");$("#word"+a).removeClass("burnMarker");u="no";a="no"}}else if(o==true&&s==false){var c=$(this).attr("id");var h=c.substring(4);n=parseInt(h);w()}else if(o==true&&s==true){}});$("a").click(function(e){e.preventDefault()});$("img").click(function(e){e.preventDefault();$(this).toggleClass("eraser")});$(window).keydown(function(e){if(e.which==49){r=10}if(e.which==50){r=20}if(e.which==51){r=30}if(e.which==52){r=40}if(e.which==53){r=50}if(e.which==55){v()}if(e.which==56){m()}if(e.which==57){g()}if(e.which==13){d()}if(e.which==16){o=true}if(e.which==192){}if(e.which==219){if(f=="eraser"){if(i>=0){i=i-.025;$(".eraser").css("opacity",i);$("span").each(function(e,t){if($(this).hasClass("eraser")==true){$(this).removeClass("eraser");$(this).addClass("eraser")}})}}}if(e.which==221){if(f=="eraser"){if(i<=.8){i=i+.025;$(".eraser").css("opacity",i);$("span").each(function(e,t){if($(this).hasClass("eraser")==true){$(this).removeClass("eraser");$(this).addClass("eraser")}})}}}if(e.which==90){s=true}if(e.which==88){b()}if(e.which==67){y()}}).keyup(function(e){if(e.which==90){s=false}if(e.which==16){o=false}})}function p(t){e=e+1;return"<span id='word"+e+"'>"+t+"</span>";alert(e)}function d(){var e=f;if(e=="eraser"){$("span").each(function(e,t){if($(this).hasClass("eraser")==true){$(this).css("opacity",1);$(this).addClass("redactor");$(this).removeClass("eraser")}});f="redactor"}else if(e=="redactor"){$("span").each(function(e,t){if($(this).hasClass("redactor")==true){$(this).css("opacity",i);$(this).removeClass("redactor");$(this).addClass("eraser")}});f="eraser"}}function v(){$("span").each(function(e,t){if(f=="eraser"){$(this).addClass("eraser");$(this).css("opacity",i)}else if(f=="redactor"){$(this).addClass("redactor");$(this).css("opacity",1)}});$("img").each(function(e,t){$(this).addClass("eraser")})}function m(){$("span").each(function(e,t){var n=Math.random();if(n>.5){if(f=="eraser"){$(this).addClass("eraser");$(this).css("opacity",i)}else if(f=="redactor"){$(this).addClass("redactor");$(this).css("opacity",1)}}else{}})}function g(){$("span").each(function(e,t){$(this).removeClass("eraser");$(this).removeClass("redactor");$(this).css("opacity",1)});$("img").each(function(e,t){$(this).removeClass("eraser")})}function y(){if(u<a){var e=u;var t=a}else if(u>a){e=a;t=u}for(var n=e;n<=t;n++){if(f=="eraser"){$('span[id="word'+n+'"]').addClass("eraser");$('span[id="word'+n+'"]').css("opacity",i)}else if(f=="redactor"){$('span[id="word'+n+'"]').addClass("redactor");$('span[id="word'+n+'"]').css("opacity",1)}}$("span").each(function(e,t){$(this).removeClass("burnMarker")});u="no";a="no"}function b(){if(u<a){var e=u;var t=a}else if(u>a){e=a;t=u}for(var n=e;n<=t;n++){if(f=="eraser"){var r=Math.random();if(r>.7){$('span[id="word'+n+'"]').addClass("eraser");$('span[id="word'+n+'"]').css("opacity",i)}else{}}else if(f=="redactor"){var s=Math.random();if(s>.7){$('span[id="word'+n+'"]').addClass("redactor");$('span[id="word'+n+'"]').css("opacity",1)}else{}}}$("span").each(function(e,t){$(this).removeClass("burnMarker")});u="no";a="no"}function w(){var e=n*1-r*1;var t=n*1+r*1;for(var s=e;s<t;s++){if(f=="eraser"){$('span[id="word'+s+'"]').addClass("eraser");$('span[id="word'+s+'"]').css("opacity",i)}else if(f=="redactor"){$('span[id="word'+s+'"]').addClass("redactor");$('span[id="word'+s+'"]').css("opacity",1)}}$('span[id="word'+n+'"]').removeClass("eraser");$('span[id="word'+n+'"]').removeClass("redactor")}var e=0;var t=0;var n;var r=30;var i=.05;var s=false;var o=false;var u="no";var a="no";var f="eraser";l();}});